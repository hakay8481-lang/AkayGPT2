<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AkayGPT</title>
<style>
  body { font-family: sans-serif; background: #1e1e1e; color: #f5f5f5; margin:0; padding:0; display:flex; flex-direction:column; height:100vh; }
  #chat { flex:1; overflow-y:auto; padding:10px; }
  #chat div { margin:5px 0; padding:8px 12px; border-radius:12px; max-width:80%; }
  .user { background:#0b93f6; color:#fff; align-self:flex-end; }
  .bot { background:#2c2c2c; color:#fff; align-self:flex-start; }
  #inputArea { display:flex; padding:10px; background:#111; }
  #input { flex:1; padding:8px 12px; border:none; border-radius:12px; margin-right:10px; }
  #send { padding:8px 12px; border:none; border-radius:12px; background:#0b93f6; color:#fff; font-weight:bold; }
</style>
</head>
<body>
<div id="chat"></div>
<div id="inputArea">
  <input id="input" placeholder="Mesajınızı yazın..." />
  <button id="send">Gönder</button>
</div>

<script>
const PROXY_URL = "https://akaygpt-proxy.hakay8481.workers.dev"; // Worker URL

function addMessage(text, cls) {
  const div = document.createElement("div");
  div.textContent = text;
  div.className = cls;
  document.getElementById("chat").appendChild(div);
  div.scrollIntoView();
}

document.getElementById("send").addEventListener("click", async () => {
  const input = document.getElementById("input");
  const msg = input.value.trim();
  if(!msg) return;
  addMessage(msg, "user");
  input.value = "";

  try {
    const res = await fetch(PROXY_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message: msg })
    });
    const data = await res.json();
    // HuggingFace API’den dönen cevabı alıyoruz
    const text = data[0]?.generated_text || "Cevap yok";
    addMessage(text, "bot");
  } catch(e) {
    addMessage("Bağlantı hatası", "bot");
  }
});
</script>
</body>
</html>
